<div class="container">
  <div class="total-comments">
    <p>{{ totalComment }} Comments</p>
  </div>
  <form
    class="comment-input"
    [formGroup]="commentForm"
    (ngSubmit)="createComment()"
  >
    <div class="image">
      <img src="{{this.currentUser.photoUrl}}" alt="">
    </div>
    <div class="form-fill">
      <mat-form-field appearance="fill" class="input">
        <input
          formControlName="content"
          matInput
          placeholder="Add a public comment..."
        />
      </mat-form-field>
      <button mat-icon-button type="submit" aria-label="Send comment">
        <mat-icon>send</mat-icon>
      </button>
    </div>
  </form>
  @for(comment of this.comments; track $index) {
    <div class="comments">
      @if(comment.profile.photoUrl) {
        <div class="image">
          <img src="{{comment.profile.photoUrl}}" alt="" referrerpolicy="no-referrer">
        </div>
      }@else{
        <div class="image">
          <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png" alt="">
        </div>
      }
      <div class="comment-info">
        <div class="comment-info-above">
          <p class="user">{{comment.profile.name}}</p>
          <p>{{ comment.createdAt | date:'dd/MM/yyyy' }}</p>
        </div>
        <div class="comment-info-below">
          <p>{{comment.content}}</p>
        </div>
      </div>
      @if(comment.profile.uid === currentUser.uid) {
        <button mat-icon-button (click)="onDeleteComment(comment.id,currentUser.uid)">
          <mat-icon >delete</mat-icon>
        </button>
      }
    </div>
  }
</div>
